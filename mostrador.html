<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mostrador • Rhodes Burgers</title>
  <link rel="icon" href="images/logo.png" />
  <style>
    :root{
      --primary:#625A45; --text:#111; --muted:#666; --bg:#f6f6f6; --card:#fff;
      --radius:18px; --shadow:0 8px 20px rgba(0,0,0,.08); --ring:#eaeaea;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);
      font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif}

    header{position:sticky;top:0;z-index:10;background:#fff;box-shadow:0 2px 12px rgba(0,0,0,.06)}
    .topbar{max-width:1300px;margin:0 auto;padding:10px 12px;display:flex;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:8px;text-decoration:none;color:inherit;font-weight:800}
    .brand img{width:36px;height:36px;object-fit:contain;border-radius:10px}

    .layout{display:flex;max-width:1300px;margin:20px auto;padding:0 12px;gap:20px}
    .menu{flex:2;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
    .cart{flex:1;position:sticky;top:70px;align-self:flex-start;background:#fff;border-radius:18px;box-shadow:var(--shadow);padding:16px;max-height:calc(100vh - 90px);overflow:auto}

    .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .card img{width:100%;height:170px;object-fit:cover;background:#f0f0f0}
    .card .content{padding:12px;flex:1;display:flex;flex-direction:column}
    .row{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .price{font-weight:800}
    .actions{display:flex;gap:6px;flex-wrap:wrap}
    .btn{border:2px solid var(--primary);border-radius:999px;padding:6px 12px;background:#fff;color:var(--primary);font-weight:700;cursor:pointer}
    .btn.primary{background:var(--primary);color:#fff}
    .btn.ghost{border-color:#ddd;color:#444}
    .btn.small{padding:4px 8px;font-size:13px}

    .item{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;padding:8px 0;border-bottom:1px solid #eee}
    .muted{color:var(--muted);font-size:14px}
    .total{display:flex;justify-content:space-between;font-weight:800;font-size:18px;margin-top:10px}

    /* Modal */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:50}
    .overlay.open{display:flex}
    .modal{background:#fff;border-radius:18px;box-shadow:var(--shadow);width:500px;max-width:92vw;padding:16px;max-height:90vh;overflow:auto}
    .rowx{display:flex;align-items:center;justify-content:space-between;margin:10px 0}
    .qtybox{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--ring);border-radius:999px;padding:4px 10px}
    .qtybox button{border:1px solid #ccc;background:#fff;border-radius:50%;width:26px;height:26px;cursor:pointer;font-weight:900}
    textarea,input,select{width:100%;padding:8px;border:1px solid var(--ring);border-radius:10px;margin-top:4px}
    h3{margin:0 0 10px}
  </style>
</head>
<body>
<header>
  <div class="topbar">
    <a href="index.html" class="brand"><img src="images/logo.png" alt="">Rhodes Burgers</a>
    <h2 style="margin-left:auto">Mostrador</h2>
  </div>
</header>

<main class="layout">
  <section class="menu" id="menu"></section>
  <aside class="cart">
    <h2>Carrito</h2>
    <div id="cartItems"></div>
    <div class="total"><span>Total</span><span id="cartTotal">$0</span></div>
    <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px">
      <input type="text" id="inpNombre" placeholder="Nombre (requerido)">
      <input type="text" id="inpTel" placeholder="Teléfono (opcional)">
      <select id="inpPago">
        <option value="">Medio de pago</option>
        <option>Efectivo</option>
        <option>Mercado Pago</option>
        <option>Tarjeta</option>
      </select>
      <textarea id="inpNota" placeholder="Comentario"></textarea>
      <button class="btn primary" id="btnPagar">Pagar</button>
    </div>
  </aside>
</main>

<!-- Modal personalizar -->
<div class="overlay" id="overlay">
  <div class="modal">
    <h3 id="modTitle">Personalizar</h3>
    <div class="rowx">
      <span>Cantidad</span>
      <div class="qtybox"><button id="qtyDec">-</button><span id="qtyVal">1</span><button id="qtyInc">+</button></div>
    </div>
    <div class="rowx" style="flex-direction:column;align-items:flex-start">
      <label>Papas (obligatorio)</label>
      <label><input type="radio" name="fries" value="con_sazon"> Con sazón</label>
      <label><input type="radio" name="fries" value="sin_sazon"> Sin sazonar</label>
    </div>
    <div class="rowx" id="rowPatties" style="display:none">
      <span>Medallones extra</span>
      <div class="qtybox"><button id="patDec">-</button><span id="patVal">0</span><button id="patInc">+</button></div>
    </div>
    <div class="rowx" id="rowCheddar" style="display:none">
      <span>Cheddar extra</span>
      <div class="qtybox"><button id="cheDec">-</button><span id="cheVal">0</span><button id="cheInc">+</button></div>
    </div>
    <textarea id="notes" placeholder="Notas opcionales"></textarea>
    <div style="text-align:right;margin-top:10px">
      <button class="btn ghost" id="btnCancel">Cancelar</button>
      <button class="btn primary" id="btnAdd">Agregar</button>
    </div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
  // Firebase
  const firebaseConfig = {
    apiKey:"AIzaSyBbt5YOWDE0ouLn-Ib_iD1yUesok5SEhB8",
    authDomain:"rhodes-burguers.firebaseapp.com",
    projectId:"rhodes-burguers",
    storageBucket:"rhodes-burguers.firebasestorage.app",
    messagingSenderId:"951646688091",
    appId:"1:951646688091:web:05db5fadb4150d1fa9c07e"
  };
  try{firebase.initializeApp(firebaseConfig);}catch(e){}
  const db=firebase.firestore();

  const BURGERS=[
    {id:"bigjohn_simple",name:"Big John Simple",price:10900,img:"images/Big John Simple.jpg",kind:"simple"},
    {id:"bigjohn_doble",name:"Big John Doble",price:13900,img:"images/Big John Doble.jpg",kind:"double"},
    {id:"burguesa_simple",name:"Burguesa Simple",price:11900,img:"images/Burguesa Simple.jpg",kind:"simple"},
    {id:"burguesa_doble",name:"Burguesa Doble",price:14900,img:"images/Burguesa Doble.jpg",kind:"double"},
    {id:"cheesebacon_spl",name:"CheeseBacon Simple",price:10500,img:"images/CheeseBacon Simple.jpg",kind:"simple"},
    {id:"cheesebacon_dbl",name:"CheeseBacon Doble",price:13500,img:"images/CheeseBacon Doble.jpg",kind:"double"},
    {id:"cheese_simple",name:"Cheeseburger Simple",price:9500,img:"images/cheeseburger simple.jpg",kind:"simple"},
    {id:"cheese_doble",name:"Cheeseburger Doble",price:12500,img:"images/cheeseburger doble.jpg",kind:"double"},
    {id:"rhodes_simple",name:"Rhodes Simple",price:11900,img:"images/Rhodes Simple.jpg",kind:"simple"},
    {id:"rhodes_doble",name:"Rhodes Doble",price:14900,img:"images/Rhodes Doble.jpg",kind:"double"},
    {id:"morgan_simple",name:"Morgan Simple",price:10900,img:"images/Morgan Simple.jpg",kind:"simple"},
    {id:"morgan_doble",name:"Morgan Doble",price:14500,img:"images/Morgan Doble.jpg",kind:"double"},
    {id:"pollo_crispy",name:"Pollo Crispy",price:8900,img:"images/Pollo crispy.jpg",kind:"chicken"}
  ];
  const DRINKS=[
    {id:"coca_org",name:"Coca-Cola Original 500ml",price:3000,img:"images/coca cola original.jpg"},
    {id:"coca_zero",name:"Coca-Cola Zero 500ml",price:3000,img:"images/coca cola zero.jpg"},
    {id:"sprite",name:"Sprite 500ml",price:3000,img:"images/sprite.jpg"},
    {id:"fanta",name:"Fanta Naranja 500ml",price:3000,img:"images/fanta naranja.jpg"},
    {id:"agua_sg",name:"Agua sin gas 500ml",price:2200,img:"images/agua sin gas.jpg"},
    {id:"agua_cg",name:"Agua con gas 500ml",price:2200,img:"images/agua con gas.jpg"}
  ];
  const EXTRA_PRICE_PATTY=1600,EXTRA_PRICE_CHEDDAR=300;
  const CART={};

  const menu=document.getElementById("menu"),cartItems=document.getElementById("cartItems"),cartTotal=document.getElementById("cartTotal");
  const $=s=>document.querySelector(s),money=n=>(Number(n)||0).toLocaleString("es-AR",{style:"currency",currency:"ARS",maximumFractionDigits:0});

  function renderCard(item,type){
    const el=document.createElement("div");el.className="card";
    el.innerHTML=`<img src="${item.img}" alt=""><div class="content"><h3>${item.name}</h3>
      <div class="row"><span class="price">${money(item.price)}</span>
      <div class="actions"><button class="btn" data-add>Agregar</button>${type==="burger"?'<button class="btn" data-custom>Personalizar</button>':""}</div></div></div>`;
    const add=el.querySelector("[data-add]"),cust=el.querySelector("[data-custom]");
    if(type==="burger"){add.onclick=()=>openCustomize(item);if(cust)cust.onclick=()=>openCustomize(item);}
    else{add.onclick=()=>addDrink(item);}
    return el;
  }
  function mount(){BURGERS.forEach(b=>menu.appendChild(renderCard(b,"burger")));DRINKS.forEach(d=>menu.appendChild(renderCard(d,"drink")));}
  function renderCart(){
    cartItems.innerHTML="";let tot=0;
    Object.values(CART).forEach(obj=>{
      const unit=obj.item.price+(obj.extras?.patty||0)*EXTRA_PRICE_PATTY+(obj.extras?.cheddar||0)*EXTRA_PRICE_CHEDDAR;
      tot+=unit*obj.qty;
      cartItems.innerHTML+=`<div class="item"><div><strong>${obj.item.name}</strong><div class="muted">Papas: ${obj.fries||"-"}</div>${obj.extras?.patty||obj.extras?.cheddar?'<div class="muted">'+(obj.extras.patty?`+${obj.extras.patty} medallón `:"")+(obj.extras.cheddar?`+${obj.extras.cheddar} cheddar`:"")+'</div>':""}${obj.notes?'<div class="muted">'+obj.notes+'</div>':""}</div><div><button class="btn small ghost" onclick="changeQty('${obj.item.id}',-1)">-</button><span>${obj.qty}</span><button class="btn small ghost" onclick="changeQty('${obj.item.id}',1)">+</button></div></div>`;
    });
    cartTotal.textContent=money(tot);
  }
  function changeQty(id,delta){if(!CART[id])return;CART[id].qty+=delta;if(CART[id].qty<=0)delete CART[id];renderCart();}
  function addDrink(item){if(!CART[item.id])CART[item.id]={item,qty:0};CART[item.id].qty++;renderCart();}

  // Modal
  const overlay=$("#overlay"),qtyVal=$("#qtyVal"),qtyInc=$("#qtyInc"),qtyDec=$("#qtyDec"),rowPatties=$("#rowPatties"),rowCheddar=$("#rowCheddar"),patVal=$("#patVal"),patInc=$("#patInc"),patDec=$("#patDec"),cheVal=$("#cheVal"),cheInc=$("#cheInc"),cheDec=$("#cheDec"),notes=$("#notes"),btnAdd=$("#btnAdd"),btnCancel=$("#btnCancel");
  let currentItem=null;
  qtyInc.onclick=()=>qtyVal.textContent=+qtyVal.textContent+1;
  qtyDec.onclick=()=>qtyVal.textContent=Math.max(1,+qtyVal.textContent-1);
  patInc.onclick=()=>patVal.textContent=Math.min(2,+patVal.textContent+1);
  patDec.onclick=()=>patVal.textContent=Math.max(0,+patVal.textContent-1);
  cheInc.onclick=()=>cheVal.textContent=Math.min(3,+cheVal.textContent+1);
  cheDec.onclick=()=>cheVal.textContent=Math.max(0,+cheVal.textContent-1);
  btnCancel.onclick=()=>overlay.classList.remove("open");

  function openCustomize(item){currentItem=item;$("#modTitle").textContent=item.name;qtyVal.textContent=1;patVal.textContent=0;cheVal.textContent=0;notes.value="";document.querySelectorAll('[name="fries"]').forEach(r=>r.checked=false);if(item.kind==="double"){rowPatties.style.display="flex";rowCheddar.style.display="flex";}else if(item.kind==="chicken"){rowPatties.style.display="none";rowCheddar.style.display="flex";}else{rowPatties.style.display="none";rowCheddar.style.display="none";}overlay.classList.add("open");}
  btnAdd.onclick=()=>{const qty=+qtyVal.textContent;const fries=document.querySelector('[name="fries"]:checked');if(!fries){alert("Elegí papas");return;}const extras={patty:0,cheddar:0};if(currentItem.kind==="double"){extras.patty=+patVal.textContent;extras.cheddar=+cheVal.textContent;}if(currentItem.kind==="chicken"){extras.cheddar=+cheVal.textContent;}CART[currentItem.id]?CART[currentItem.id].qty+=qty:CART[currentItem.id]={item:currentItem,qty,fries:fries.value,extras,notes:notes.value.trim()};overlay.classList.remove("open");renderCart();};

  // Pagar
  document.getElementById("btnPagar").onclick=async()=>{
    const nombre=$("#inpNombre").value.trim();if(!nombre)return alert("Ingresá el nombre");const tel=$("#inpTel").value.trim();const pago=$("#inpPago").value;const nota=$("#inpNota").value.trim();
    const items=Object.values(CART);if(!items.length)return alert("Carrito vacío");
    await db.collection("orders").add({nombre:nombre+" (Mostrador)",telefono:tel,pago,nota,items,createdAt:new Date(),status:"accepted",paid:false});
    alert("Pedido guardado");location.reload();
  };

  mount();
</script>
</body>
</html>
