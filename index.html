<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Rhodes Burgers - Men√∫</title>
  <link rel="icon" href="images/logo.png" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#625A45" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://firebasestorage.googleapis.com">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
   
  <style>
    :root{ --primary: #625A45; --primary-dark: #4a4434; --text: #1f2937; --muted: #6b7280; --bg: #f3f4f6; --card: #ffffff; --ring: #e5e7eb; --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); --font: 'Inter', sans-serif; --st-accepted: #fbbf24; --st-in_prep: #f97316; --st-ready: #06b6d4; --st-delivered: #22c55e; --st-cancelled: #ef4444; --pay-paid: #15803d; --pay-pending: #ea580c; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font-family:var(--font); -webkit-tap-highlight-color: transparent;}
    
    /* SKELETON LOADING (Carga Fantasma) */
    .skeleton { background: #eee; background: linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%); background-size: 200% 100%; animation: 1.5s shine linear infinite; border-radius: 12px; }
    @keyframes shine { to { background-position-x: -200%; } }
    .sk-card { height: 250px; width: 100%; margin-bottom: 10px; }
    .sk-text { height: 20px; width: 60%; margin: 10px 0; }
    
    header { position: sticky; top: 0; z-index: 1000; background: #fff; border-bottom: 1px solid var(--ring); will-change: transform; }
    .topbar { max-width: 1200px; margin: 0 auto; height: 60px; padding: 0 12px; display: flex; align-items: center; gap: 6px; overflow: visible; }
    .brand { font-weight: 800; font-size: 18px; color: var(--primary); display: flex; align-items: center; text-decoration: none; margin-right: 5px; flex-shrink: 0; }
    .brand img { width: 32px; height: 32px; border-radius: 6px; margin-right: 8px; }
    .spacer { flex: 1; }
    
    /* Botones optimizados */
    .btn { padding: 8px 14px; border-radius: 99px; text-decoration: none; color: var(--primary); font-weight: 700; font-size: 14px; border: 2px solid var(--primary); display: inline-flex; align-items: center; cursor: pointer; background: #fff; transition: background 0.1s; }
    .btn.primary { background: var(--primary); color: #fff; }
    .btn.ghost { border-color: #e5e7eb; color: #374151; }
    .btn:active { transform: scale(0.98); }

    .status-pill { display:inline-flex; flex-direction:column; align-items:center; justify-content:center; min-width:140px; padding:4px 12px; border-radius:12px; font-weight:700; background:#f4f4f4; border:1px solid var(--ring); color:#222; text-align:center; line-height: 1.2; font-size: 12px; }
    .status-open { background:#dcfce7; border-color:#86efac; color:#166534; }
    .status-closed { background:#f3f4f6; border-color:#e5e7eb; color:#6b7280; }

    .container { max-width: 800px; margin: 20px auto; padding: 0 16px 80px 16px; }
    h1 { font-size: 24px; font-weight: 800; color: #111; margin-bottom: 16px; }
    h2 { font-size: 20px; margin: 30px 0 15px; color: #4b5563; border-bottom: 2px solid #e5e7eb; padding-bottom: 5px; }

    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 16px; }
    @media (min-width: 600px) { .grid { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); } }

    .card { background: var(--card); border-radius: 16px; box-shadow: var(--shadow); overflow: hidden; border: 1px solid var(--ring); display: flex; flex-direction: column; transition: transform 0.2s; will-change: transform; }
    .card:active { transform: scale(0.98); }
    
    .card .imgwrap { position: relative; width: 100%; padding-top: 75%; /* Aspect Ratio 4:3 */ background: #f3f4f6; overflow: hidden; }
    .card img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: opacity 0.3s; }
    
    .card .content { padding: 12px; display: flex; flex-direction: column; flex: 1; }
    .card h3 { margin: 0 0 4px; font-size: 16px; font-weight: 700; color: #1f2937; }
    .card p.muted { font-size: 12px; color: #6b7280; margin: 0 0 10px; line-height: 1.4; flex: 1; }
    
    .card .row { display: flex; align-items: center; justify-content: space-between; margin-top: auto; }
    .card .price { font-weight: 800; font-size: 16px; color: var(--primary); }

    /* DRAWER */
    .drawer { position: fixed; top: 0; right: -100%; width: 100%; max-width: 400px; height: 100%; background: #fff; box-shadow: -5px 0 25px rgba(0,0,0,0.2); transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2000; display: flex; flex-direction: column; visibility: hidden; }
    .drawer.open { right: 0; visibility: visible; }
    .drawer header { padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; font-weight: 800; font-size: 18px; }
    .drawer .body { flex: 1; overflow-y: auto; padding: 15px; -webkit-overflow-scrolling: touch; }
    
    .item { display: flex; justify-content: space-between; margin-bottom: 15px; border-bottom: 1px dashed #eee; padding-bottom: 10px; }
    .total { font-size: 20px; font-weight: 900; text-align: right; margin-top: 20px; color: var(--primary); }

    /* MODAL */
    .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,.6); display:none; align-items:flex-end; justify-content:center; z-index:9999; backdrop-filter: blur(2px); }
    .overlay.open { display:flex !important; }
    .modal { width:100%; max-width:500px; background:white; border-radius:20px 20px 0 0; padding:20px; box-shadow:0 -10px 40px rgba(0,0,0,0.2); animation:slideUp 0.3s ease-out; max-height: 90vh; overflow-y: auto; }
    @media(min-width: 600px) { .overlay { align-items: center; } .modal { border-radius: 20px; } }
    @keyframes slideUp { from { transform:translateY(100%); } to { transform:translateY(0); } }

    /* UTILS */
    .hidden { display: none !important; }
    .soldout-badge { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); color: #fff; font-size: 10px; font-weight: 700; padding: 4px 8px; border-radius: 4px; backdrop-filter: blur(4px); }
    .card[data-soldout="1"] { opacity: 0.6; pointer-events: none; filter: grayscale(1); }

    /* CONTROLS */
    .qtybox { display: flex; align-items: center; gap: 10px; border: 1px solid #e5e5e5; padding: 4px 8px; border-radius: 20px; }
    .qtybtn { width: 28px; height: 28px; border-radius: 50%; border: none; background: #f3f4f6; color: var(--primary); font-weight: 900; font-size: 16px; cursor: pointer; }
    .chip { padding: 8px 12px; background: #f9fafb; border: 1px solid #e5e5e5; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px; }
    .chip input { accent-color: var(--primary); width: 16px; height: 16px; }
    textarea { width: 100%; border: 1px solid #e5e5e5; border-radius: 12px; padding: 12px; font-family: inherit; margin-top: 10px; resize: none; }
  </style>
</head>
<body>

  <div id="storeBlocker" class="hidden" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:99999;color:white;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:20px;">
    <div style="font-size:50px">‚õî</div>
    <h2 id="blockerTitle" style="color:white;margin:10px 0">CERRADO</h2>
    <p id="blockerMsg" style="color:#ccc">Volvemos pronto.</p>
  </div>

  <header>
    <div class="topbar">
      <a href="index.html" class="brand">
        <img src="images/logo.png" alt="Logo" width="32" height="32" />
        <strong>Rhodes</strong>
      </a>
      <div class="spacer"></div>
      <span id="statusPill" class="status-pill status-closed">
        <span class="status-main">Cargando...</span>
      </span>
      <button class="btn primary" id="btnCart" style="margin-left: 10px;">
        üõí <span id="cartBubble" style="margin-left:5px">0</span>
      </button>
    </div>
  </header>

  <main class="container">
    <div id="menuContainer">
        <h2 class="skeleton sk-text" style="width: 40%"></h2>
        <div class="grid">
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card"></div>
            <div class="skeleton sk-card"></div>
        </div>
    </div>
  </main>

  <aside class="drawer" id="drawer">
    <header>
      <span>Tu Pedido</span>
      <button onclick="toggleDrawer(false)" style="background:none;border:none;font-size:20px;cursor:pointer">‚úï</button>
    </header>
    <div class="body">
      <div id="cartItems"></div>
      <div class="total">Total: <span id="cartTotal">$0</span></div>
      <button class="btn primary" style="width:100%; justify-content:center; margin-top:20px; padding:15px;" id="btnCheckout">
        Confirmar Pedido
      </button>
      <button class="btn ghost" style="width:100%; justify-content:center; margin-top:10px;" onclick="emptyCart()">
        Vaciar Carrito
      </button>
    </div>
  </aside>

  <div class="overlay" id="modalOverlay">
    <div class="modal">
      <h3 id="modTitle" style="margin-top:0">Personalizar</h3>
      
      <div style="margin-top:15px">
        <label style="font-weight:700; font-size:14px; color:#4b5563">Guarnici√≥n (Obligatorio)</label>
        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:8px">
            <label class="chip"><input type="radio" name="fries" value="con_sazon" checked> Sazonadas</label>
            <label class="chip"><input type="radio" name="fries" value="con_sal"> Con Sal</label>
            <label class="chip"><input type="radio" name="fries" value="sin_sal"> Sin Sal</label>
        </div>
        <div id="friesNote" style="color:red; font-size:11px; margin-top:4px"></div>
      </div>

      <div id="extrasSection" style="margin-top:20px;">
          <div class="row" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px">
              <span>+ Carne <small>($2800)</small></span>
              <div class="qtybox">
                  <button class="qtybtn" onclick="updExtra('patty', -1)">-</button>
                  <span id="qtyPatty" style="font-weight:700; width:20px; text-align:center">0</span>
                  <button class="qtybtn" onclick="updExtra('patty', 1)">+</button>
              </div>
          </div>
          <div class="row" style="display:flex; justify-content:space-between; align-items:center;">
              <span>+ Cheddar <small>($300)</small></span>
              <div class="qtybox">
                  <button class="qtybtn" onclick="updExtra('cheddar', -1)">-</button>
                  <span id="qtyCheddar" style="font-weight:700; width:20px; text-align:center">0</span>
                  <button class="qtybtn" onclick="updExtra('cheddar', 1)">+</button>
              </div>
          </div>
      </div>

      <textarea id="modNotes" rows="2" placeholder="Notas: Sin cebolla, sin salsa..."></textarea>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px; border-top:1px solid #eee; padding-top:15px">
          <div style="font-size:18px; font-weight:800" id="modTotal">$0</div>
          <button class="btn primary" id="btnAddCart">Agregar al Pedido</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js" defer></script>

  <script defer>
    // === CONFIGURACI√ìN ===
    const HOURS = {
        0: [[19,0,24,0]], // Dom
        1: [], // Lun (Cerrado)
        2: [], // Mar (Cerrado)
        3: [[19,0,24,0]], 4: [[19,0,24,0]], 5: [[19,0,24,0]], 6: [[19,0,24,0]]
    };
    const CART_KEY = "rhodes_cart_v4_client";
    const EXTRAS_PRICE = { patty: 2800, cheddar: 300 };

    // === ESTADO GLOBAL ===
    let db, BURGERS=[], DRINKS=[], SIDES=[], CART={ items:[] }, ORDERABLE=false;
    let MODAL_ITEM = null, MODAL_EXTRAS = { patty:0, cheddar:0 };
    let SIDES_AVAIL = { con_sazon:true, con_sal:true, sin_sal:true };

    document.addEventListener("DOMContentLoaded", () => {
        // Inicializar Firebase cuando el DOM est√© listo
        const checkFirebase = setInterval(() => {
            if (window.firebase) {
                clearInterval(checkFirebase);
                initApp();
            }
        }, 50);
    });

    function initApp() {
        const firebaseConfig = {apiKey:"AIzaSyBbt5YOWDE0ouLn-Ib_iD1yUesok5SEhB8",authDomain:"rhodes-burguers.firebaseapp.com",projectId:"rhodes-burguers",storageBucket:"rhodes-burguers.firebasestorage.app",messagingSenderId:"951646688091",appId:"1:951646688091:web:05db5fadb4150d1fa9c07e"};
        firebase.initializeApp(firebaseConfig);
        db = firebase.firestore();

        // üöÄ CACH√â INTELIGENTE (PERSISTENCIA)
        db.enablePersistence().catch(err => console.log("Persistencia no disponible:", err.code));

        // Cargar Carrito
        const saved = localStorage.getItem(CART_KEY);
        if(saved) CART = JSON.parse(saved);
        updateCartBadge();

        // Listeners
        loadConfig();
        loadProducts();
    }

    // === CARGA DE DATOS ===
    function loadConfig() {
        // Estado del local
        db.collection("config").doc("store").onSnapshot(doc => {
            const d = doc.data() || {};
            checkStatus(d);
        });
        // Disponibilidad de papas
        db.collection("config").doc("sides").onSnapshot(doc => {
            const d = doc.data() || {};
            SIDES_AVAIL = { con_sazon: d.con_sazon!==false, con_sal: d.con_sal!==false, sin_sal: d.sin_sal!==false };
        });
    }

    function loadProducts() {
        db.collection("products").onSnapshot(snap => {
            BURGERS = []; DRINKS = []; SIDES = [];
            
            snap.forEach(doc => {
                const d = doc.data();
                const item = { id: doc.id, ...d };
                if (d.available === false) return; // Filtrar no disponibles

                if (d.category === 'hamburguesas') BURGERS.push(item);
                else if (d.category === 'bebidas') DRINKS.push(item);
                else if (d.category === 'guarniciones') SIDES.push(item);
            });

            // Ordenar alfab√©ticamente o por precio (opcional)
            BURGERS.sort((a,b) => a.price - b.price);
            
            renderMenu();
        });
    }

    // === RENDERIZADO ===
    function renderMenu() {
        const container = document.getElementById("menuContainer");
        let html = '';

        const section = (title, items) => {
            if(!items.length) return '';
            let cards = items.map(p => `
                <div class="card" onclick="openModal('${p.id}')">
                    <div class="imgwrap">
                        <img src="${p.img || 'images/logo.png'}" loading="lazy" decoding="async" alt="${p.name}">
                    </div>
                    <div class="content">
                        <h3>${p.name}</h3>
                        <p class="muted">${p.description || ''}</p>
                        <div class="row">
                            <span class="price">$${p.price}</span>
                            <button class="btn primary small">+</button>
                        </div>
                    </div>
                </div>
            `).join('');
            return `<h2>${title}</h2><div class="grid">${cards}</div>`;
        }

        html += section('Hamburguesas', BURGERS);
        html += section('Guarniciones', SIDES);
        html += section('Bebidas', DRINKS);

        container.innerHTML = html;
    }

    // === ESTADO DEL LOCAL ===
    function checkStatus(config) {
        const now = new Date();
        const day = now.getDay();
        const min = now.getHours() * 60 + now.getMinutes();
        
        let isOpen = false;
        let msg = "Cerrado";

        // 1. Mantenimiento
        if(config.maintenance?.active) {
             document.getElementById("storeBlocker").classList.remove("hidden");
             return;
        } else {
             document.getElementById("storeBlocker").classList.add("hidden");
        }

        // 2. Horario Autom√°tico
        const todayHours = HOURS[day] || [];
        for(let slot of todayHours) {
            if (min >= (slot[0]*60 + slot[1]) && min < (slot[2]*60 + slot[3])) {
                isOpen = true;
                msg = `Abierto hasta ${slot[2]}:${String(slot[3]).padStart(2,'0')}`;
            }
        }

        // 3. Forzados
        if(config.forceOpen === true) { isOpen = true; msg = "Abierto (Extra)"; }
        if(config.forceOpen === false) { isOpen = false; msg = "Cerrado temporalmente"; }

        ORDERABLE = isOpen;
        const pill = document.getElementById("statusPill");
        
        if (isOpen) {
            pill.className = "status-pill status-open";
            pill.innerHTML = `<span class="status-main">ABIERTO</span><span class="status-sub" style="font-size:10px">${msg}</span>`;
        } else {
            pill.className = "status-pill status-closed";
            pill.innerHTML = `<span class="status-main">CERRADO</span>`;
        }
    }

    // === MODAL Y CARRITO ===
    window.openModal = (id) => {
        if(!ORDERABLE) { alert("El local est√° cerrado en este momento."); return; }

        MODAL_ITEM = [...BURGERS, ...SIDES, ...DRINKS].find(i => i.id === id);
        if(!MODAL_ITEM) return;

        // Reset
        MODAL_EXTRAS = { patty:0, cheddar:0 };
        document.getElementById("qtyPatty").innerText = "0";
        document.getElementById("qtyCheddar").innerText = "0";
        document.getElementById("modNotes").value = "";
        document.getElementById("modTitle").innerText = MODAL_ITEM.name;

        // Mostrar/Ocultar secciones seg√∫n tipo
        const isBurger = MODAL_ITEM.category === 'hamburguesas';
        document.getElementById("extrasSection").style.display = isBurger ? 'block' : 'none';
        
        // Papas disponibles
        const radios = document.getElementsByName("fries");
        radios.forEach(r => {
            const label = r.parentElement;
            if(SIDES_AVAIL[r.value]) {
                label.style.display = "flex";
                r.disabled = false;
            } else {
                label.style.display = "none";
                r.disabled = true;
            }
        });
        // Seleccionar la primera disponible
        const firstAvail = Array.from(radios).find(r => !r.disabled);
        if(firstAvail) firstAvail.checked = true;

        updateModalTotal();
        document.getElementById("modalOverlay").classList.add("open");
    }

    window.updExtra = (type, delta) => {
        const newVal = MODAL_EXTRAS[type] + delta;
        if(newVal >= 0 && newVal <= 3) {
            MODAL_EXTRAS[type] = newVal;
            document.getElementById(type === 'patty' ? "qtyPatty" : "qtyCheddar").innerText = newVal;
            updateModalTotal();
        }
    }

    function updateModalTotal() {
        if(!MODAL_ITEM) return;
        let total = Number(MODAL_ITEM.price);
        total += (MODAL_EXTRAS.patty * EXTRAS_PRICE.patty);
        total += (MODAL_EXTRAS.cheddar * EXTRAS_PRICE.cheddar);
        document.getElementById("modTotal").innerText = "$" + total;
    }

    // === CARRITO ===
    document.getElementById("btnAddCart").onclick = () => {
        const friesVal = document.querySelector('input[name="fries"]:checked')?.value || "con_sal";
        const notes = document.getElementById("modNotes").value.trim();
        
        const cartItem = {
            id: MODAL_ITEM.id,
            name: MODAL_ITEM.name,
            price: Number(MODAL_ITEM.price), // Precio base para referencia
            category: MODAL_ITEM.category,
            qty: 1,
            fries: friesVal,
            extras: {...MODAL_EXTRAS}, // Copia
            notes: notes,
            // Precio unitario FINAL calculado
            finalPrice: Number(MODAL_ITEM.price) + (MODAL_EXTRAS.patty * EXTRAS_PRICE.patty) + (MODAL_EXTRAS.cheddar * EXTRAS_PRICE.cheddar)
        };

        // Buscar si ya existe id√©ntico
        const existing = CART.items.find(i => 
            i.id === cartItem.id && 
            i.fries === cartItem.fries && 
            JSON.stringify(i.extras) === JSON.stringify(cartItem.extras) &&
            i.notes === cartItem.notes
        );

        if(existing) {
            existing.qty++;
        } else {
            CART.items.push(cartItem);
        }

        saveCart();
        document.getElementById("modalOverlay").classList.remove("open");
        toggleDrawer(true);
    };

    function saveCart() {
        localStorage.setItem(CART_KEY, JSON.stringify(CART));
        updateCartBadge();
        renderCartList();
    }

    function updateCartBadge() {
        const count = CART.items.reduce((sum, i) => sum + i.qty, 0);
        document.getElementById("cartBubble").innerText = count;
    }

    function renderCartList() {
        const div = document.getElementById("cartItems");
        div.innerHTML = "";
        let total = 0;

        CART.items.forEach((item, idx) => {
            const itemTotal = item.finalPrice * item.qty;
            total += itemTotal;
            
            let details = [];
            if(item.category === 'hamburguesas') {
                const fMap = {con_sazon:"Papas Sazonadas", con_sal:"Papas con Sal", sin_sal:"Papas sin Sal"};
                details.push(fMap[item.fries]);
                if(item.extras.patty) details.push(`+${item.extras.patty} Carne`);
                if(item.extras.cheddar) details.push(`+${item.extras.cheddar} Cheddar`);
            }
            if(item.notes) details.push(`üìù "${item.notes}"`);

            div.innerHTML += `
                <div class="item">
                    <div style="flex:1">
                        <div style="font-weight:700">${item.name}</div>
                        <div style="font-size:12px; color:#666">${details.join(" ‚Ä¢ ")}</div>
                        <div style="font-weight:600; color:var(--primary)">$${item.finalPrice}</div>
                    </div>
                    <div class="qtybox">
                        <button class="qtybtn" onclick="cartQty(${idx}, -1)">-</button>
                        <span style="width:20px; text-align:center">${item.qty}</span>
                        <button class="qtybtn" onclick="cartQty(${idx}, 1)">+</button>
                    </div>
                </div>
            `;
        });

        document.getElementById("cartTotal").innerText = "$" + total;
    }

    window.cartQty = (idx, delta) => {
        if(CART.items[idx]) {
            CART.items[idx].qty += delta;
            if(CART.items[idx].qty <= 0) CART.items.splice(idx, 1);
            saveCart();
        }
    }

    window.emptyCart = () => {
        if(confirm("¬øVaciar carrito?")) {
            CART.items = [];
            saveCart();
            toggleDrawer(false);
        }
    }

    window.toggleDrawer = (open) => {
        const d = document.getElementById("drawer");
        if(open) { d.classList.add("open"); renderCartList(); }
        else d.classList.remove("open");
    }

    document.getElementById("btnCart").onclick = () => toggleDrawer(true);
    document.getElementById("modalOverlay").onclick = (e) => {
        if(e.target === document.getElementById("modalOverlay")) document.getElementById("modalOverlay").classList.remove("open");
    }

    document.getElementById("btnCheckout").onclick = () => {
        if(CART.items.length === 0) return alert("El carrito est√° vac√≠o");
        // Aqu√≠ ir√≠a la redirecci√≥n a WhatsApp o Checkout
        // Generar texto para WhatsApp
        let msg = "*NUEVO PEDIDO WEB*\n----------------\n";
        let total = 0;
        CART.items.forEach(i => {
            msg += `${i.qty}x *${i.name}*\n`;
            if(i.category==='hamburguesas') msg += `   üçü ${i.fries}\n`;
            if(i.extras.patty) msg += `   ü•© +${i.extras.patty} carne\n`;
            if(i.notes) msg += `   üìù ${i.notes}\n`;
            total += i.finalPrice * i.qty;
        });
        msg += `----------------\n*TOTAL: $${total}*`;
        
        // Redirigir a WhatsApp (reemplazar numero)
        const phone = "543484346113"; 
        window.location.href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
    };

  </script>
</body>
</html>
