<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rhodes Burguers - Menú</title>
  <style>
    :root { --verde:#28a745; --verdeOsc:#0f7a33; }
    *{ box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-image: url('background.jpg');
      background-size: contain;              /* para que el logo se vea entero */
      background-repeat: no-repeat;
      background-position: center;
      background-attachment: fixed;
      background-color: #f0f0f0;
      padding-top: 80px;
    }
    header {
      background: #fff;
      color: #000;
      position: fixed;
      top: 0;
      width: 100%;
      padding: 10px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 10;
      box-shadow: 0 2px 5px rgba(0,0,0,.1);
    }
    header img.logo { height: 50px; }
    .header-right {
      display: flex;
      align-items: center;
      gap: 12px;
      transform: translateX(-80px);
    }
    .btn {
      background: var(--verde);
      color: #fff;
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 700;
      border: 2px solid var(--verdeOsc);
      display:inline-block;
    }
    .wrap {
      max-width: 1100px;
      margin: 18px auto 28px;
      padding: 0 14px;
    }
    h1, h2 { margin: 6px 0 14px; }
    .section { margin-top: 18px; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 26px rgba(0,0,0,.15);  /* sin bordes negros */
      display: flex;
      flex-direction: column;
    }
    .card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .card-body {
      padding: 14px;
      display: flex;
      flex-direction: column;
      flex: 1;
      gap: 6px;
    }
    .card-body h3 { margin: 0; font-size: 1.05rem; }
    .desc { color:#555; font-size: .95rem; }
    .footer-row {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 10px;
      margin-top: auto;
    }
    .price { font-weight: 800; }
    .qty-row { display:flex; align-items:center; gap:8px; }
    .qty-row input[type="number"]{
      width:70px; padding:6px 8px; border:1px solid #ddd; border-radius:6px;
    }
    .actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    .btn-add, .btn-custom {
      border: none;
      padding: 10px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    .btn-add {
      background: var(--verde);
      color: #fff;
      border: 2px solid var(--verdeOsc);
    }
    .btn-custom {
      background: #333;
      color: #fff;
    }

    /* Modal */
    .modal {
      position: fixed; inset:0;
      background: rgba(0,0,0,.5);
      display:none;
      align-items: center; justify-content: center;
      padding: 16px;
      z-index: 50;
    }
    .modal.open { display:flex; }
    .modal-card {
      width: 100%;
      max-width: 520px;
      background:#fff; border-radius:12px; padding:16px;
      box-shadow: 0 10px 26px rgba(0,0,0,.2);
      display:flex; flex-direction:column; gap:10px;
    }
    .modal-header { display:flex; justify-content:space-between; align-items:center; }
    .modal-title { font-size:1.1rem; font-weight:800; margin:0; }
    .close { background:#eee; border:none; border-radius:8px; padding:6px 10px; cursor:pointer; }
    .row { display:grid; grid-template-columns: 1fr auto; align-items:center; gap:8px; }
    .row label { font-weight:700; }
    .opt { display:flex; gap:8px; align-items:center; }
    .opt input[type="number"]{ width:80px; padding:6px 8px; border:1px solid #ddd; border-radius:6px; }
    .modal-actions { display:flex; justify-content:flex-end; gap:8px; margin-top:6px; }
    .muted { color:#666; font-size:.9rem; }
    .note { background:#f8fafc; padding:8px; border-radius:8px; border:1px solid #e5e7eb; color:#444; font-size:.9rem; }
    .pill { background:#e5e7eb; border-radius:999px; padding:2px 8px; font-size:.85rem; }

    /* Mejoras mobile para alinear precio y botones */
    @media (max-width: 480px){
      .footer-row {
        grid-template-columns: 1fr;
        gap: 6px;
      }
      .actions { grid-template-columns: 1fr; }
      .qty-row { justify-content:flex-start; }
    }
  </style>

  <script>
    // ====== DATA DEL MENÚ (con tipos para personalización) ======
    const hamburguesas = [
      { nombre: "CheeseBacon Doble", desc: "Doble medallón con doble cheddar y bacon en pan brioche. Incluye papas fritas.", precio: 13500, img: "cheesebacon doble.jpg", tipo: "doble" },
      { nombre: "CheeseBacon Simple", desc: "Medallón con doble cheddar y bacon en pan brioche. Incluye papas fritas.", precio: 10500, img: "cheesebacon simple.jpg", tipo: "simple" },
      { nombre: "CheeseBurger Doble", desc: "Doble medallón con doble cheddar en pan brioche. Incluye papas fritas.", precio: 12500, img: "cheeseburger doble.jpg", tipo: "doble" },
      { nombre: "CheeseBurger Simple", desc: "Medallón con doble cheddar en pan brioche. Incluye papas fritas.", precio: 9500,  img: "cheeseburger simple.jpg", tipo: "simple" },
      { nombre: "Big John Doble", desc: "Doble medallón con cheddar, lechuga, pepinillos y salsa big mac. Incluye papas fritas.", precio: 13900, img: "Big John Doble.jpg", tipo: "doble" },
      { nombre: "Big John Simple", desc: "Medallón con cheddar, lechuga, pepinillos y salsa big mac. Incluye papas fritas.", precio: 10900, img: "Big John Simple.jpg", tipo: "simple" },
      { nombre: "Burguesa Doble", desc: "Doble medallón con doble cheddar, mostaza & miel y cebolla caramelizada. Incluye papas fritas.", precio: 14900, img: "Burguesa Doble.jpg", tipo: "doble" },
      { nombre: "Burguesa Simple", desc: "Medallón con doble cheddar, mostaza & miel y cebolla caramelizada. Incluye papas fritas.", precio: 11900, img: "Burguesa Simple.jpg", tipo: "simple" },
      { nombre: "Morgan Doble", desc: "Doble medallón con doble cheddar, bacon, barbacoa y cebolla crispy. Incluye papas fritas.", precio: 14500, img: "Morgan Doble.jpg", tipo: "doble" },
      { nombre: "Morgan Simple", desc: "Medallón con doble cheddar, bacon, barbacoa y cebolla crispy. Incluye papas fritas.", precio: 10900, img: "Morgan Simple.jpg", tipo: "simple" },
      { nombre: "Rhodes Doble", desc: "Doble medallón con doble cheddar, bacon, morrones, cebolla y salsa crispy. Incluye papas fritas.", precio: 14900, img: "Rhodes Doble.jpg", tipo: "doble" },
      { nombre: "Rhodes Simple", desc: "Medallón con doble cheddar, bacon, morrones, cebolla y salsa crispy. Incluye papas fritas.", precio: 11900, img: "Rhodes Simple.jpg", tipo: "simple" },
      { nombre: "Pollo Crispy", desc: "Pechuga de pollo crispy con lechuga y mayo en pan brioche. Incluye papas fritas.", precio: 8900, img: "Pollo crispy.jpg", tipo: "pollo" }
    ];

    const bebidas = [
      { nombre: "Coca Cola Original", desc: "500cc", precio: 3000, img: "coca cola original.jpg" },
      { nombre: "Coca Cola Zero",     desc: "500cc", precio: 3000, img: "coca cola zero.jpg" },
      { nombre: "Sprite",              desc: "500cc", precio: 3000, img: "sprite.jpg" },
      { nombre: "Aquarius Pera",       desc: "500cc", precio: 3000, img: "aquarius pera.jpg" },
      { nombre: "Aquarius Pomelo",     desc: "500cc", precio: 3000, img: "aquarius pomelo.jpg" },
    ];

    // ====== CARRITO (compatibilidad con pedido_cliente.html) ======
    function getOrder(){ try { return JSON.parse(localStorage.getItem('order')||'[]'); } catch { return []; } }
    function setOrder(o){ localStorage.setItem('order', JSON.stringify(o)); }

    function addToCart(item, price, quantity=1){
      const order = getOrder();
      const existing = order.find(p => p.item === item && Number(p.price) === Number(price));
      if (existing) existing.quantity += quantity;
      else order.push({ item, price:Number(price), quantity:Number(quantity) });
      setOrder(order);
      alert(`${quantity} x ${item} agregado al carrito`);
    }

    // ====== Render de tarjetas ======
    function cardTemplate(p, isBurger=true){
      const idSafe = p.nombre.replace(/\s+/g,'-').toLowerCase()+ '-' + Math.random().toString(36).slice(2,7);
      return `
        <div class="card">
          <img src="${p.img}" alt="${p.nombre}">
          <div class="card-body">
            <h3>${p.nombre}</h3>
            ${p.desc ? `<div class="desc">${p.desc}</div>` : ""}
            <div class="footer-row">
              <div class="qty-row">
                <label for="qty-${idSafe}" class="pill">Cant.</label>
                <input id="qty-${idSafe}" type="number" value="1" min="1" />
              </div>
              <div class="price">$${p.precio}</div>
            </div>
            <div class="actions">
              <button class="btn-add" data-name="${p.nombre}" data-price="${p.precio}" data-qty-id="qty-${idSafe}">Agregar</button>
              ${isBurger ? `<button class="btn-custom" data-name="${p.nombre}" data-price="${p.precio}" data-tipo="${p.tipo}" data-qty-id="qty-${idSafe}">Personalizar</button>` : ""}
            </div>
          </div>
        </div>
      `;
    }

    function renderMenu(){
      const hamburguesasGrid = document.getElementById('grid-hamb');
      const bebidasGrid = document.getElementById('grid-beb');
      hamburguesasGrid.innerHTML = hamburguesas.map(h => cardTemplate(h, true)).join('');
      bebidasGrid.innerHTML = bebidas.map(b => cardTemplate(b, false)).join('');

      // Listeners "Agregar"
      document.querySelectorAll('.btn-add').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          const name = btn.dataset.name;
          const price = Number(btn.dataset.price);
          const qtyInput = document.getElementById(btn.dataset.qtyId);
          const qty = Math.max(1, Number(qtyInput.value || 1));
          addToCart(name, price, qty);
        });
      });

      // Listeners "Personalizar"
      document.querySelectorAll('.btn-custom').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          openModal({
            nombre: btn.dataset.name,
            precio: Number(btn.dataset.price),
            tipo: btn.dataset.tipo,
            qtyId: btn.dataset.qtyId
          });
        });
      });
    }

    // ====== MODAL de personalización ======
    let modal, mTitle, mPatty, mCheddar, mQty, mPrice, mSave;
    function setupModal(){
      modal   = document.getElementById('modal');
      mTitle  = document.getElementById('m-title');
      mPatty  = document.getElementById('m-patty');
      mCheddar= document.getElementById('m-cheddar');
      mQty    = document.getElementById('m-qty');
      mPrice  = document.getElementById('m-price');
      mSave   = document.getElementById('m-save');

      document.getElementById('m-close').addEventListener('click', ()=> modal.classList.remove('open'));
      document.getElementById('m-cancel').addEventListener('click', ()=> modal.classList.remove('open'));
    }

    function openModal({ nombre, precio, tipo, qtyId }){
      // Reglas:
      // - 'doble': extra medallones 0..2, extra cheddar 0..3
      // - 'simple': extra medallones 0,   extra cheddar 0..3
      // - 'pollo': extra medallones 0,    extra cheddar 0..3
      mTitle.textContent = nombre;

      const qtyInputCard = document.getElementById(qtyId);
      mQty.value = Math.max(1, Number(qtyInputCard.value || 1));

      let maxPattys = 0;
      if (tipo === 'doble') maxPattys = 2;
      mPatty.value = 0;
      mPatty.min = 0;
      mPatty.max = maxPattys;

      mCheddar.value = 0;
      mCheddar.min = 0;
      mCheddar.max = 3;

      function computePrice(){
        const extrasPatty  = Number(mPatty.value||0);
        const extrasCheese = Number(mCheddar.value||0);
        const qty = Number(mQty.value||1);
        const extraPattyCost  = 1000;  // podés ajustar valores
        const extraCheeseCost = 500;
        const unit = precio + (extrasPatty * extraPattyCost) + (extrasCheese * extraCheeseCost);
        return { unit, total: unit * qty };
      }

      function renderPrice(){
        const { unit, total } = computePrice();
        mPrice.textContent = `Unitario: $${unit} · Total: $${total}`;
      }
      ['input','change'].forEach(ev=>{
        mPatty.addEventListener(ev, renderPrice);
        mCheddar.addEventListener(ev, renderPrice);
        mQty.addEventListener(ev, renderPrice);
      });
      renderPrice();

      mSave.onclick = ()=>{
        const extrasPatty  = Number(mPatty.value||0);
        const extrasCheese = Number(mCheddar.value||0);
        const qty = Number(mQty.value||1);
        const extraPattyCost  = 1000;
        const extraCheeseCost = 500;

        const unit = precio + (extrasPatty * extraPattyCost) + (extrasCheese * extraCheeseCost);
        const labelExtras = [];
        if (extrasPatty>0)  labelExtras.push(`+${extrasPatty} medallón/es`);
        if (extrasCheese>0) labelExtras.push(`+${extrasCheese} cheddar`);
        const fullName = labelExtras.length ? `${nombre} (${labelExtras.join(', ')})` : nombre;

        addToCart(fullName, unit, qty);
        modal.classList.remove('open');
      };

      modal.classList.add('open');
    }

    window.addEventListener('DOMContentLoaded', ()=>{
      renderMenu();
      setupModal();
    });
  </script>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Rhodes Burguers" class="logo">
    <div class="header-right">
      <a class="btn" href="contacto.html">Contacto</a>
      <a class="btn" href="pedido_cliente.html">Ver mi pedido</a>
    </div>
  </header>

  <div class="wrap">
    <h1>Menú</h1>

    <div class="section">
      <h2>Hamburguesas</h2>
      <div id="grid-hamb" class="grid"></div>
    </div>

    <div class="section">
      <h2>Bebidas</h2>
      <div id="grid-beb" class="grid"></div>
    </div>
  </div>

  <!-- Modal Personalizar -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="m-title">
      <div class="modal-header">
        <h3 id="m-title" class="modal-title">Personalizar</h3>
        <button id="m-close" class="close">Cerrar</button>
      </div>

      <div class="note">
        Reglas: <span class="pill">Simple</span> y <span class="pill">Pollo</span> → hasta <strong>+3 cheddar</strong>. 
        <span class="pill">Doble</span> → hasta <strong>+2 medallones</strong> y <strong>+3 cheddar</strong>.
      </div>

      <div class="row">
        <label>Medallones extra</label>
        <div class="opt">
          <input id="m-patty" type="number" value="0" min="0" max="2" />
          <span class="muted">(+ $1000 c/u)</span>
        </div>
      </div>

      <div class="row">
        <label>Fetas de cheddar extra</label>
        <div class="opt">
          <input id="m-cheddar" type="number" value="0" min="0" max="3" />
          <span class="muted">(+ $500 c/u)</span>
        </div>
      </div>

      <div class="row">
        <label>Cantidad</label>
        <div class="opt">
          <input id="m-qty" type="number" value="1" min="1" />
        </div>
      </div>

      <div class="row">
        <label>Precio</label>
        <div id="m-price" class="opt"><strong>—</strong></div>
      </div>

      <div class="modal-actions">
        <button id="m-cancel" class="close">Cancelar</button>
        <button id="m-save" class="btn-add">Agregar al carrito</button>
      </div>
    </div>
  </div>
</body>
</html>
