<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rhodes Burguers - Menú</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding-top: 80px;
      background-image: url('background.jpg');
      background-size: contain;       /* sin zoom, se ve completo */
      background-repeat: no-repeat;
      background-position: center;
      background-attachment: fixed;
      background-color: #f0f0f0;
    }
    /* HEADER */
    header {
      background-color: white;
      color: black;
      position: fixed;
      width: 100%;
      top: 0;
      padding: 10px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 10;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    header img.logo { height: 50px; }
    .header-right { display:flex; align-items:center; gap:12px; transform: translateX(-80px); }
    .btn {
      background: #28a745; color: #fff; text-decoration: none;
      padding: 8px 16px; border-radius: 6px; font-weight: bold;
    }

    /* CONTENEDORES */
    h2 { text-align: center; margin: 18px 0; }
    .menu-section {
      margin: 24px auto 30px;
      max-width: 980px;
      background: rgba(255,255,255,0.95);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.15);
      border: 2px solid #000;
    }

    /* ITEM */
    .menu-item {
      display: grid;
      grid-template-columns: 140px 1fr auto auto auto;
      grid-template-areas: "img info price actions customize";
      gap: 14px; align-items: center;
      background: #fff; border-radius: 10px; padding: 12px; margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      border: 2px solid #000;
    }
    .item-img {
      grid-area: img;
      width: 140px; height: 100px;
      object-fit: cover; object-position: center;
      border-radius: 8px; background:#f4f4f4; border:1px solid #222;
    }
    .item-details { grid-area: info; min-width: 0; }
    .item-title { font-weight: 700; font-size: 1.05rem; color:#111; margin:0; }
    .item-desc { font-size: .9rem; color:#444; margin:.25rem 0 0; }
    .item-price { grid-area: price; font-weight: 700; min-width: 90px; text-align:right; }
    .item-actions { grid-area: actions; display:flex; align-items:center; gap: 8px; }
    input[type="number"] { width: 64px; padding:6px; border:1px solid #222; border-radius:6px; background:#fff; }
    button.add, button.customize {
      background:#333; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer;
    }
    button.customize { grid-area: customize; background:#0f7a33; }

    a#go-to-pedido {
      display:block; text-align:center; background:#28a745; color:#fff;
      padding:12px; max-width:320px; margin: 6px auto 34px;
      text-decoration:none; border-radius: 8px; border:2px solid #0f7a33; font-weight: bold;
    }

    /* ====== Tablet (≤ 900px): 3 columnas */
    @media (max-width: 900px) {
      .menu-item{
        display: grid;
        grid-template-columns: 140px 1fr 180px;
        grid-template-areas:
          "img info price"
          "img info actions"
          "img info customize";
        align-items: start;
        gap: 12px 14px;
      }
      .item-img{ width:140px; height:100px; }
      .item-price{
        justify-self: end; align-self: start; margin-top: 2px; font-size: 1.05rem;
      }
      .item-actions{ justify-self: end; }
      button.customize{ justify-self: end; }
      .item-title{ font-size: 1.06rem; }
      .item-desc{ font-size: .95rem; }
    }

    /* ====== Móvil (≤ 720px): 2 columnas apilado ordenado */
    @media (max-width: 720px) {
      .menu-item{
        grid-template-columns: 110px 1fr;
        grid-template-areas:
          "img info"
          "img price"
          "img actions"
          "img customize";
        align-items: start;
        gap: 10px 12px;
      }
      .item-img{ width:110px; height:90px; }
      .item-price{ justify-self: start; margin-top: 2px; font-size: 1rem; }
      .item-actions{ justify-self: start; }
      button.customize{ justify-self: start; width: auto; }
      .item-title{ font-size: 1.05rem; }
      .item-desc{ font-size: .92rem; }
      input[type="number"]{ width:64px; padding:6px; }
    }

    /* MODAL PERSONALIZAR */
    .modal-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,.45);
      display: none; align-items: center; justify-content: center; z-index: 50;
    }
    .modal {
      width: 95%; max-width: 460px; background: #fff; border-radius: 12px;
      box-shadow: 0 16px 40px rgba(0,0,0,.25); border: 2px solid #000; padding: 16px;
    }
    .modal h3 { margin: 6px 0 10px; }
    .row { display:flex; align-items:center; justify-content:space-between; margin:10px 0; }
    .counter { display:flex; align-items:center; gap:8px; }
    .counter button { width:32px; height:32px; border-radius:6px; border:none; background:#333; color:#fff; cursor:pointer; }
    .pill { font-weight:700; }
    .modal .footer { display:flex; gap:8px; justify-content:flex-end; margin-top:14px; }
    .modal .footer button { padding:10px 14px; border-radius:8px; border:none; cursor:pointer; }
    .btn-cancel { background:#999; color:#fff; }
    .btn-apply { background:#28a745; color:#fff; }
    .modal .note { font-size: 0.9rem; color:#444; }
    .subtotal { font-weight: 700; margin-top: 6px; }
  </style>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Rhodes Burguers" class="logo">
    <div class="header-right">
      <a class="btn" href="contacto.html">Contacto</a>
    </div>
  </header>

  <section class="menu-section" id="hamburguesas">
    <h2>Hamburguesas</h2>
    <!-- items se insertan desde JS -->
  </section>

  <section class="menu-section" id="bebidas">
    <h2>Bebidas</h2>
    <!-- items se insertan desde JS -->
  </section>

  <a id="go-to-pedido" href="pedido_cliente.html">Ver mi pedido</a>

  <!-- Modal Personalización -->
  <div id="backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal">
      <h3 id="modal-title">Personalizar</h3>
      <p class="note" id="modal-rules"></p>
      <div class="row" id="row-medallones" style="display:none;">
        <span><strong>Medallones extra</strong> <span class="pill">(+ $<span id="precio-medallon"></span> c/u)</span></span>
        <div class="counter">
          <button type="button" id="menos-medallon">-</button>
          <span id="cant-medallon">0</span>
          <button type="button" id="mas-medallon">+</button>
        </div>
      </div>
      <div class="row" id="row-cheddar">
        <span><strong>Fetas de cheddar extra</strong> <span class="pill">(+ $<span id="precio-cheddar"></span> c/u)</span></span>
        <div class="counter">
          <button type="button" id="menos-cheddar">-</button>
          <span id="cant-cheddar">0</span>
          <button type="button" id="mas-cheddar">+</button>
        </div>
      </div>
      <p class="subtotal">Extras: $<span id="subtotal-extras">0</span></p>
      <div class="footer">
        <button type="button" class="btn-cancel" id="cancelar">Cancelar</button>
        <button type="button" class="btn-apply" id="aplicar">Añadir con extras</button>
      </div>
    </div>
  </div>

  <script>
    /* ======= PRECIOS DE EXTRAS (ajustá a gusto) ======= */
    const PRECIO_EXTRA_MEDALLON = 2500; // dobles: hasta +2
    const PRECIO_EXTRA_CHEDDAR  = 700;  // simples/dobles/pollo: hasta +3

    /* ======= DATA ======= */
    // Agrego un "tipo" para reglas: 'simple' | 'doble' | 'pollo'
    const hamburguesas = [
      { nombre: "CheeseBurger Simple", tipo:"simple", desc: "Medallón con doble cheddar en pan brioche. Incluye papas fritas.", precio: 9500,  imagen: "img/cheeseburger simple.jpg" },
      { nombre: "CheeseBurger Doble",  tipo:"doble",  desc: "Doble Medallón con doble cheddar en pan brioche. Incluye papas fritas.",  precio: 12500, imagen: "img/cheeseburger doble.jpg" },
      { nombre: "CheeseBacon Simple",  tipo:"simple", desc: "Medallón con doble cheddar y bacon en pan brioche. Incluye papas fritas.", precio: 10500, imagen: "img/cheesebacon simple.jpg" },
      { nombre: "CheeseBacon Doble",   tipo:"doble",  desc: "Doble Medallón con doble cheddar y bacon en pan brioche. Incluye papas fritas.", precio: 13500, imagen: "img/cheesebacon doble.jpg" },
      { nombre: "Morgan Simple",        tipo:"simple", desc: "Doble cheddar, bacon, barbacoa y cebolla crispy. Incluye papas fritas.", precio: 10900, imagen: "img/Morgan Simple.jpg" },
      { nombre: "Morgan Doble",         tipo:"doble",  desc: "Doble medallón, doble cheddar, bacon, barbacoa y cebolla crispy. Incluye papas fritas.", precio: 14500, imagen: "img/Morgan Doble.jpg" },
      { nombre: "Big John Simple",      tipo:"simple", desc: "Cheddar, lechuga, pepinillos y salsa big mac. Incluye papas fritas.", precio: 10900, imagen: "img/Big John Simple.jpg" },
      { nombre: "Big John Doble",       tipo:"doble",  desc: "Doble medallón, cheddar, lechuga, pepinillos y salsa big mac. Incluye papas fritas.", precio: 13900, imagen: "img/Big John Doble.jpg" },
      { nombre: "Rhodes Simple",        tipo:"simple", desc: "Doble cheddar, bacon, morrones, cebolla y salsa crispy. Incluye papas fritas.", precio: 11900, imagen: "img/Rhodes Simple.jpg" },
      { nombre: "Rhodes Doble",         tipo:"doble",  desc: "Doble medallón, cheddar, bacon, morrones, cebolla y salsa crispy. Incluye papas fritas.", precio: 14900, imagen: "img/Rhodes Doble.jpg" },
      { nombre: "Burguesa Simple",      tipo:"simple", desc: "Doble cheddar, mostaza y miel, cebolla caramelizada (pan Burgerluna). Incluye papas fritas.", precio: 11900, imagen: "img/Burguesa Simple.jpg" },
      { nombre: "Burguesa Doble",       tipo:"doble",  desc: "Doble medallón, doble cheddar, mostaza y miel, cebolla caramelizada (pan Burgerluna). Incluye papas fritas.", precio: 14900, imagen: "img/Burguesa Doble.jpg" },
      { nombre: "Pollo Crispy",         tipo:"pollo",  desc: "Pechuga crispy con lechuga y mayo en pan brioche. Incluye papas fritas.", precio: 8900,  imagen: "img/Pollo crispy.jpg" }
    ];

    const bebidas = [
      { nombre: "Coca Cola Original 500cc", desc: "", precio: 3000 },
      { nombre: "Coca Cola Zero 500cc",     desc: "", precio: 3000 },
      { nombre: "Sprite 500cc",             desc: "", precio: 3000 },
      { nombre: "Aquarius Pera 500cc",      desc: "", precio: 3000 },
      { nombre: "Aquarius Pomelo 500cc",    desc: "", precio: 3000 }
    ];

    function el(tag, cls) { const e=document.createElement(tag); if(cls) e.className=cls; return e; }

    function renderItems(items, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      items.forEach(({ nombre, desc, precio, imagen, tipo }) => {
        const card = el("div","menu-item");

        // img
        const img = el("img","item-img"); img.src = imagen || ""; img.alt = nombre; card.appendChild(img);

        // details
        const details = el("div","item-details");
        details.innerHTML = `<h3 class="item-title">${nombre}</h3>${desc ? `<p class="item-desc">${desc}</p>` : ''}`;
        card.appendChild(details);

        // price
        const price = el("div","item-price"); price.textContent = `$${precio}`; card.appendChild(price);

        // actions
        const actions = el("div","item-actions");
        const qty = el("input"); qty.type="number"; qty.min="1"; qty.value="1";
        const add = el("button","add"); add.textContent = "Añadir";
        add.addEventListener("click", () => agregarPedidoBasico(nombre, precio, desc||'', qty));
        actions.appendChild(qty); actions.appendChild(add);
        card.appendChild(actions);

        // customize
        const customize = el("button","customize"); customize.textContent="Personalizar";
        customize.addEventListener("click", () => abrirModalPersonalizar({ nombre, tipo, basePrecio: precio, desc: desc||'', qtyInput: qty }));
        card.appendChild(customize);

        container.appendChild(card);
      });
    }

    function agregarPedidoBasico(nombre, precio, desc, qtyInput) {
      const cantidad = Math.max(1, parseInt(qtyInput.value || '1', 10));
      const itemKey = desc ? `${nombre} - ${desc}` : nombre;
      const pedido = JSON.parse(localStorage.getItem('order') || '[]');
      const existente = pedido.find(p => p.item === itemKey);
      if (existente) existente.quantity += cantidad;
      else pedido.push({ item: itemKey, quantity: cantidad, price: precio });
      localStorage.setItem('order', JSON.stringify(pedido));
      qtyInput.value = 1;
      alert(`${cantidad} x ${nombre} añadido al pedido`);
    }

    renderItems(hamburguesas, 'hamburguesas');
    renderItems(bebidas.map(b => ({...b, imagen: null, tipo:"bebida"})), 'bebidas');

    /* ======= MODAL LÓGICA ======= */
    const backdrop = document.getElementById('backdrop');
    const precioMedallonEl = document.getElementById('precio-medallon');
    const precioCheddarEl  = document.getElementById('precio-cheddar');
    const cantMedallonEl = document.getElementById('cant-medallon');
    const cantCheddarEl  = document.getElementById('cant-cheddar');
    const rowMedallones  = document.getElementById('row-medallones');
    const rowCheddar     = document.getElementById('row-cheddar');
    const menosMedallon  = document.getElementById('menos-medallon');
    const masMedallon    = document.getElementById('mas-medallon');
    const menosCheddar   = document.getElementById('menos-cheddar');
    const masCheddar     = document.getElementById('mas-cheddar');
    const subtotalExtrasEl = document.getElementById('subtotal-extras');
    const cancelarBtn    = document.getElementById('cancelar');
    const aplicarBtn     = document.getElementById('aplicar');
    const modalRulesEl   = document.getElementById('modal-rules');

    precioMedallonEl.textContent = PRECIO_EXTRA_MEDALLON;
    precioCheddarEl.textContent  = PRECIO_EXTRA_CHEDDAR;

    let modalState = null;

    function abrirModalPersonalizar({ nombre, tipo, basePrecio, desc, qtyInput }) {
      // Reglas
      let maxMed = 0;
      let maxCheddar = 3;
      if (tipo === 'doble') maxMed = 2;
      if (tipo === 'simple' || tipo === 'pollo') maxMed = 0;

      // Texto reglas
      const parts = [];
      if (maxMed > 0) parts.push(`hasta ${maxMed} medallones extra`);
      if (maxCheddar > 0) parts.push(`hasta ${maxCheddar} fetas de cheddar extra`);
      modalRulesEl.textContent = `Podés agregar ${parts.join(' y ')}.`;

      // Mostrar/ocultar filas
      rowMedallones.style.display = maxMed > 0 ? 'flex' : 'none';
      rowCheddar.style.display = 'flex';

      // Reset contadores
      cantMedallonEl.textContent = '0';
      cantCheddarEl.textContent  = '0';
      subtotalExtrasEl.textContent = '0';

      modalState = { nombre, tipo, basePrecio, desc, qtyInput, maxMed, maxCheddar, med:0, cheddar:0 };
      backdrop.style.display = 'flex';
    }

    function actualizarSubtotal() {
      const extras = (modalState.med * PRECIO_EXTRA_MEDALLON) + (modalState.cheddar * PRECIO_EXTRA_CHEDDAR);
      subtotalExtrasEl.textContent = extras.toString();
    }

    masMedallon.addEventListener('click', () => {
      if (!modalState) return;
      if (modalState.med < modalState.maxMed) {
        modalState.med++;
        cantMedallonEl.textContent = modalState.med;
        actualizarSubtotal();
      }
    });
    menosMedallon.addEventListener('click', () => {
      if (!modalState) return;
      if (modalState.med > 0) {
        modalState.med--;
        cantMedallonEl.textContent = modalState.med;
        actualizarSubtotal();
      }
    });

    masCheddar.addEventListener('click', () => {
      if (!modalState) return;
      if (modalState.cheddar < modalState.maxCheddar) {
        modalState.cheddar++;
        cantCheddarEl.textContent = modalState.cheddar;
        actualizarSubtotal();
      }
    });
    menosCheddar.addEventListener('click', () => {
      if (!modalState) return;
      if (modalState.cheddar > 0) {
        modalState.cheddar--;
        cantCheddarEl.textContent = modalState.cheddar;
        actualizarSubtotal();
      }
    });

    cancelarBtn.addEventListener('click', () => {
      backdrop.style.display = 'none';
      modalState = null;
    });

    aplicarBtn.addEventListener('click', () => {
      if (!modalState) return;
      const { nombre, basePrecio, desc, qtyInput, med, cheddar } = modalState;
      const cantidad = Math.max(1, parseInt(qtyInput.value || '1', 10));
      const extrasPrecio = (med * PRECIO_EXTRA_MEDALLON) + (cheddar * PRECIO_EXTRA_CHEDDAR);
      const precioFinal = basePrecio + extrasPrecio;

      let extrasDesc = [];
      if (med > 0) extrasDesc.push(`+${med} medallón/es`);
      if (cheddar > 0) extrasDesc.push(`+${cheddar} cheddar`);
      const itemText = extrasDesc.length
        ? `${nombre} - ${desc}${desc ? ' - ' : ''}Extras: ${extrasDesc.join(', ')}`
        : (desc ? `${nombre} - ${desc}` : nombre);

      const pedido = JSON.parse(localStorage.getItem('order') || '[]');
      const existente = pedido.find(p => p.item === itemText);
      if (existente) existente.quantity += cantidad;
      else pedido.push({ item: itemText, quantity: cantidad, price: precioFinal });

      localStorage.setItem('order', JSON.stringify(pedido));
      qtyInput.value = 1;
      backdrop.style.display = 'none';
      modalState = null;
      alert(`${cantidad} x ${nombre} (con extras) añadido al pedido`);
    });

    // Cerrar modal clickeando fuera
    backdrop.addEventListener('click', (e) => {
      if (e.target === backdrop) {
        backdrop.style.display = 'none';
        modalState = null;
      }
    });
  </script>
</body>
</html>
