<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-store" />
  <title>Acceso ‚Ä¢ Rhodes Burgers</title>
  <link rel="icon" href="images/logo.png" />
  <style>
    :root{
      --primary:#2ecc71; --text:#111; --muted:#666; --bg:#f6f6f6; --card:#fff;
      --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.08); --ring:#eaeaea;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .wrap{min-height:100vh;display:grid;place-items:center;padding:24px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);width:420px;max-width:92vw;padding:22px}
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:12px}
    .brand img{width:38px;height:38px;border-radius:10px;object-fit:contain;background:#fff}
    h1{font-size:22px;margin:6px 0 2px}
    p.muted{color:var(--muted);margin:0 0 12px}
    label{font-weight:600;font-size:14px;display:block;margin:12px 0 6px}
    input{width:100%;padding:12px 12px;border:1px solid var(--ring);border-radius:12px;outline:none}
    .row{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .btn{display:inline-flex;align-items:center;gap:8px;border:2px solid var(--primary);background:#fff;color:var(--primary);padding:10px 16px;border-radius:999px;cursor:pointer;font-weight:700}
    .btn.primary{background:var(--primary);color:#fff}
    .err{background:#fff3f3;border:1px solid #ffd0d0;color:#a33;border-radius:12px;padding:10px 12px;margin:12px 0;display:none}
    .muted.small{font-size:12px;color:var(--muted)}
    .toggle{cursor:pointer;font-size:13px;color:#333;text-decoration:underline}
    .pass-wrap{position:relative}
    .eye{position:absolute;right:8px;top:50%;transform:translateY(-50%);border:2px solid var(--primary);color:var(--primary);background:#fff;border-radius:999px;width:36px;height:36px;display:grid;place-items:center;cursor:pointer}
    .eye:active{transform:translateY(-50%) scale(.98)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="brand">
        <img src="images/logo.png" alt="Rhodes Burgers" />
        <div>
          <h1>Iniciar sesi√≥n</h1>
          <p class="muted">Solo personal del local</p>
        </div>
      </div>

      <div id="err" class="err"></div>

      <form id="form" autocomplete="on" novalidate>
        <label for="user">Usuario</label>
        <input id="user" name="username" autocomplete="username" placeholder="Ej: admin" />

        <label for="pass">Contrase√±a</label>
        <div class="pass-wrap">
          <input id="pass" name="current-password" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
          <button id="eye" type="button" class="eye" title="Mostrar/ocultar">üëÅ</button>
        </div>

        <div class="row" style="margin-top:10px">
          <span class="muted small">Solo personal del local</span>
          <button id="btnLogin" class="btn primary" type="submit">Ingresar</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // ======== CONFIG ========
    const ADMIN_USER = "admin";
    const ADMIN_PASS = "1234";
    const SESSION_KEY = "rb_auth_v1"; // debe coincidir con pedido_local.html

    // ======== UI Helpers ========
    const $ = s => document.querySelector(s);
    const form = $("#form");
    const user = $("#user");
    const pass = $("#pass");
    const errBox = $("#err");
    const eye = $("#eye");

    function showErr(msg){
      errBox.textContent = msg;
      errBox.style.display = "block";
    }
    function hideErr(){
      errBox.style.display = "none";
      errBox.textContent = "";
    }

    // Mostrar/ocultar contrase√±a
    eye.addEventListener("click", ()=>{
      if(pass.type === "password"){ pass.type = "text"; eye.textContent = "üôà"; }
      else { pass.type = "password"; eye.textContent = "üëÅ"; }
    });

    // Submit (Enter o bot√≥n)
    form.addEventListener("submit", (e)=>{
      e.preventDefault();
      hideErr();
      const u = (user.value||"").trim();
      const p = (pass.value||"").trim();
      if(!u || !p){ showErr("Complet√° usuario y contrase√±a."); return; }
      if(u !== ADMIN_USER || p !== ADMIN_PASS){ showErr("Usuario o contrase√±a incorrectos."); return; }

      try{
        localStorage.setItem(SESSION_KEY, JSON.stringify({u, t: Date.now()}));
      }catch(e){/* ignore */ }

      const params = new URLSearchParams(location.search);
      const to = params.get("redirect") || "pedido_local.html";
      location.href = to;
    });

    // Si ya hay sesi√≥n, redirijo
    (function autoSkip(){
      try{
        if(localStorage.getItem(SESSION_KEY)){
          location.replace("pedido_local.html");
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
