<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Acceso al local ‚Ä¢ Rhodes Burgers</title>
  <link rel="icon" href="images/logo.png" />
  <style>
    :root{
      --primary:#2ecc71; --text:#111; --muted:#666; --bg:#f6f6f6; --card:#fff;
      --radius:22px; --shadow:0 12px 34px rgba(0,0,0,.10); --ring:#eaeaea;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif}
    header{position:sticky; top:0; z-index:10; background:#fff; box-shadow:0 2px 12px rgba(0,0,0,.06)}
    .topbar{max-width:1100px;margin:0 auto;padding:10px 12px;display:flex;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;text-decoration:none;color:inherit;font-weight:700}
    .brand img{width:36px;height:36px;border-radius:10px;background:#fff;object-fit:contain;margin-right:8px}
    .container{max-width:560px;margin:34px auto;padding:0 12px}
    .card{background:var(--card);border-radius:18px;box-shadow:var(--shadow);padding:18px}
    label{font-weight:700;display:block;margin:10px 0 6px}
    input{width:100%;padding:10px 12px;border:1px solid var(--ring);border-radius:12px;outline:none}
    .row{display:flex;align-items:center;gap:10px}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--primary);
      background:var(--primary);color:#fff;padding:10px 16px;border-radius:999px;cursor:pointer;font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .eye{position:absolute;right:10px;top:50%;transform:translateY(-50%);
      background:#fff;border:1px solid var(--ring);width:36px;height:36px;border-radius:999px;cursor:pointer}
    .pwrap{position:relative}
  </style>
</head>
<body>
  <header>
    <div class="topbar">
      <a class="brand" href="#">
        <img src="images/logo.png" alt="Rhodes Burgers">
        Acceso al local
      </a>
    </div>
  </header>

  <main class="container">
    <div class="card">
      <h2>Iniciar sesi√≥n</h2>
      <label for="user">Usuario</label>
      <input id="user" placeholder="admin" autocomplete="username" />
      <label for="pass">Contrase√±a</label>
      <div class="pwrap">
        <input id="pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
        <button id="toggle" class="eye" title="Mostrar/ocultar">üëÅ</button>
      </div>
      <div style="margin-top:14px" class="row">
        <button id="loginBtn" class="btn">Ingresar</button>
        <span class="muted">Solo personal del local</span>
      </div>
    </div>
  </main>

  <script>
    // Sin guardias ni redirecciones autom√°ticas aqu√≠.
    // Migraci√≥n/compatibilidad con bandera vieja:
    (function migrate(){
      const old = localStorage.getItem("rb_admin_ok");
      if (old && !localStorage.getItem("rb_auth_v2")) {
        try { if (JSON.parse(old) === true || old === "true") {
          localStorage.setItem("rb_auth_v2","ok");
        }} catch(_){}
      }
    })();

    // Defaults si no existen:
    if (!localStorage.getItem("rb_admin_user")) localStorage.setItem("rb_admin_user","admin");
    if (!localStorage.getItem("rb_admin_pass")) localStorage.setItem("rb_admin_pass","rhodes2024");

    const $ = s => document.querySelector(s);
    const user = $("#user");
    const pass = $("#pass");
    const btn  = $("#loginBtn");
    const toggle = $("#toggle");

    toggle.onclick = (e)=>{ e.preventDefault(); pass.type = pass.type==="password" ? "text":"password"; };

    function setAuth(ok){
      if (ok) {
        try{
          localStorage.setItem("rb_auth_v2","ok");
          localStorage.setItem("rb_admin_ok","true"); // compat
          sessionStorage.setItem("rb_auth_v2","ok");  // doble respaldo
        }catch(e){}
      } else {
        localStorage.removeItem("rb_auth_v2");
        localStorage.removeItem("rb_admin_ok");
        sessionStorage.removeItem("rb_auth_v2");
      }
    }

    btn.onclick = ()=>{
      const u = user.value.trim();
      const p = pass.value;
      const su = localStorage.getItem("rb_admin_user") || "admin";
      const sp = localStorage.getItem("rb_admin_pass") || "rhodes2024";
      if (u===su && p===sp){
        setAuth(true);
        // Mandamos un flag en el query para revalidar del otro lado y evitar casos raros de storage bloqueado
        location.replace("pedido_local.html?auth=1");
      }else{
        alert("Usuario o contrase√±a incorrectos.");
      }
    };
  </script>
</body>
</html>
